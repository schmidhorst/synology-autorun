<!DOCTYPE html><html class="img-no-display" lang="DE">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>Autorun</title>
  </head>
  <body>
    <h1>Script opmerkingen:</h1>
    <p>Zowel het primaire script, dat de gewenste actie uitvoert nadat een extern opslagapparaat is aangesloten, als het optionele aanvullende secundaire script nadat het opslagapparaat is uitgeworpen, vereisen enkele speciale overwegingen:</p>
    <ul>
      <li>Beide scripts worden gestart door de udev daemon. Ze draaien met root-privileges.</li>
      <li>De omgeving van de scripts is bijna leeg. Met name een pad naar de commando's, bijvoorbeeld uit de map /bin/, is <b>niet</b> zoals gebruikelijk ingesteld! Dat wil zeggen dat het pad ofwel bij elk commando moet worden opgegeven, ofwel dat de omgevingsvariabele PATH aan het begin van het script moet worden ingesteld.</li>
      <li>De omgevingsvariabele SHELL wijst naar /bin/ash. Dit is met DSM 7.x een link naar /bin/bash. BASH kan echter draaien in een modus waarin bijvoorbeeld "processubstitutie" niet beschikbaar is. Het kan gebeuren dat een script dat prima draait als het interactief wordt gestart, plotseling niet meer draait als het via udev daemon wordt gestart vanwege een syntaxfout. Ik raad <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bash</span> aan als shebang.</li>
      <li>Om te debuggen kan het nuttig zijn om de uitvoer van <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -f</span> in een shell venster te bekijken bij het aansluiten van een extern opslagapparaat. En een blik in het bestand /var/log/bash_err.log kan nuttig zijn.</li>
    </ul> 
     
  </body>
</html>
