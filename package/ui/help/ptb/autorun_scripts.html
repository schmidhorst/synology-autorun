<!DOCTYPE html><html class="img-no-display" lang="pt-BR">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>Autorun</title>
  </head>
  <body>
    <h1>Notas de Roteiro:</h1>
    <p>Tanto o script primário que executa a ação desejada depois que um dispositivo de armazenamento externo é conectado e o script secundário adicional opcional depois que o dispositivo de armazenamento é ejetado, requerem algumas considerações especiais:</p>
    <ul>
      <li>Ambos os scripts são iniciados pelo daemon udev. Eles são executados com privilégios de raiz.</li>
      <li>O ambiente dos scripts está quase vazio. Em particular, um caminho para os comandos, por exemplo, a partir do diretório /bin/, <b>não</b> é definido como de costume! Ou seja, o caminho deve ser especificado com cada comando ou você define a variável de ambiente PATH no início do script.</li>
      <li>A variável de ambiente SHELL aponta para /bin/ash. Este é um link para /bin/bash no DSM 7.x. Entretanto, a BASH pode rodar em um modo onde, por exemplo, a "substituição do processo" não está disponível. Pode acontecer que um script que roda sem problemas quando iniciado interativamente, de repente não roda mais quando iniciado através do daemon udev devido a um erro de sintaxe. Eu recomendo <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bash</span> como shebang.</li>
      <li>Para solução de problemas, pode ser útil observar a saída do <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -f</span> em uma janela de shell quando um dispositivo de armazenamento externo é anexado. Também uma olhada no arquivo /var/log/bash_err.log pode ser útil.</li>
    </ul> 
     
  </body>
</html>
