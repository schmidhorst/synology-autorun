<!DOCTYPE html><html class="img-no-display" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>オートラン</title>
  </head>
  <body>
    <h1>スクリプトの注意事項</h1>
    <p>外付けストレージデバイスが接続された後に目的のアクションを実行するプライマリスクリプトと、ストレージデバイスが取り出された後にオプションで追加されるセカンダリスクリプトは、どちらもいくつかの特別な配慮が必要です：</p>
    <ul>
      <li>どちらのスクリプトも、udevデーモンによって起動されます。両スクリプトはudevデーモンによって起動され、root権限で実行されます。</li>
      <li>スクリプトの環境は、ほとんど空です。特に、コマンドへのパス（例：/bin/ディレクトリからのパス）は通常通り設定されて<b>いません</b>！つまり、パスは各コマンドで指定するか、スクリプトの冒頭で環境変数PATHを設定する必要があります。</li>
      <li>環境変数SHELLは、/bin/ashを指しています。これはDSM 7.xの/bin/bashへのリンクですが、BASHは例えば「プロセス代替」が利用できないモードで実行されることがあります。対話的に起動すると問題なく動作するスクリプトが、udevデーモン経由で起動すると、突然、構文エラーで動作しなくなるということが起こりえます。shebangとして<span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bashを</span>推奨します。</li>
      <li>トラブルシューティングとしては、外部記憶装置が接続されているときに、シェルウィンドウで<span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -fの</span>出力を見ることが役に立つかもしれません。また、/var/log/bash_err.logというファイルを覗いてみるのも有効です。</li>
    </ul> 
     
  </body>
</html>
