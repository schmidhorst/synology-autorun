<!DOCTYPE html><html class="img-no-display" lang="DE">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>Autorun</title>
  </head>
  <body>
    <h1>Uwagi do skryptu:</h1>
    <p>Zarówno skrypt główny, który wykonuje żądane działanie po podłączeniu zewnętrznego urządzenia pamięci masowej, jak i opcjonalny dodatkowy skrypt wtórny po wysunięciu urządzenia pamięci masowej, wymagają pewnych specjalnych uwag:</p>
    <ul>
      <li>Oba skrypty są uruchamiane przez demona udev. Są one uruchamiane z uprawnieniami roota.</li>
      <li>Środowisko skryptów jest prawie puste. W szczególności, ścieżka do poleceń, np. z katalogu /bin/, <b>nie</b> jest ustawiona jak zwykle! Tzn. ścieżka musi być określona albo przy każdym poleceniu, albo ustawiasz zmienną środowiskową PATH na początku skryptu.</li>
      <li>Zmienna środowiskowa SHELL wskazuje na /bin/ash. W przypadku DSM 7.x jest to odnośnik do /bin/bash. BASH może być jednak uruchomiony w trybie, w którym np. nie jest dostępne "zastępowanie procesów". Może się zdarzyć, że skrypt, który działa dobrze, gdy jest uruchamiany interaktywnie, nagle nie działa już, gdy jest uruchamiany przez demona udev, z powodu błędu składni. Polecam <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bash</span> jako shebang.</li>
      <li>Do debugowania pomocne może być obserwowanie wyjścia <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -f</span> w oknie powłoki podczas podłączania zewnętrznego urządzenia magazynującego. Pomocne może być też zaglądanie do pliku /var/log/bash_err.log.</li>
    </ul> 
     
  </body>
</html>
