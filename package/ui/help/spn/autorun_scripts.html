<!DOCTYPE html><html class="img-no-display" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>Autorun</title>
  </head>
  <body>
    <h1>Notas sobre el script:</h1>
    <p>Tanto el script primario que realiza la acción deseada después de conectar un dispositivo de almacenamiento externo como el script secundario adicional opcional después de expulsar el dispositivo de almacenamiento requieren algunas consideraciones especiales:</p>
    <ul>
      <li>Ambos scripts son iniciados por el demonio udev. Se ejecutan con privilegios de root.</li>
      <li>El entorno de los scripts está casi vacío. En particular, <b>no</b> se establece una ruta a los comandos, por ejemplo, desde el directorio /bin/, como es habitual. Es decir, la ruta se debe especificar con cada comando o se debe establecer la variable de entorno PATH al principio del script.</li>
      <li>La variable de entorno SHELL apunta a /bin/ash. Este es un enlace a /bin/bash en DSM 7.x. Sin embargo, BASH puede ejecutarse en un modo en el que, por ejemplo, la "sustitución de procesos" no esté disponible. Puede ocurrir que un script que se ejecuta sin problemas cuando se inicia de forma interactiva, de repente deje de ejecutarse cuando se inicia a través del demonio udev debido a un error de sintaxis. Recomiendo <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bash</span> como shebang.</li>
      <li>Para la solución de problemas, puede ser útil observar la salida de <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -f</span> en una ventana de shell cuando se conecta un dispositivo de almacenamiento externo. También puede ser útil echar un vistazo al archivo /var/log/bash_err.log.</li>
    </ul> 
     
  </body>
</html>
