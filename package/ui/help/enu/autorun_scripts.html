<!DOCTYPE html><html class="img-no-display" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../help/help.css" rel="stylesheet" type="text/css">
    <link href="../../../../help/scrollbar/flexcroll.css" rel="stylesheet" type="text/css">
    <script src="../../../../help/scrollbar/flexcroll.js"></script>
    <script src="../../../../help/scrollbar/initFlexcroll.js"></script>
    <title>Autorun</title>
  </head>
  <body>
    <h1>Script Notes:</h1>
    <p>Both the primary script that performs the desired action after an external storage device is plugged in and the optional additional secondary script after the storage device is ejected require some special considerations:</p>
    <ul>
      <li>Both scripts are started by the udev daemon. They are executed with root privileges.</li>
      <li>The environment of the scripts is almost empty. In particular, a path to the commands, e.g. from the /bin/ directory, is <b>not</b> set as usual! I.e. the path must be specified either with each command or you set the environment variable PATH at the beginning of the script.</li>
      <li>The environment variable SHELL points to /bin/ash. This is a link to /bin/bash in DSM 7.x. However, BASH may run in a mode where, for example, "process substitution" is not available. It can happen that a script that runs without problems when started interactively, suddenly does not run anymore when started via the udev daemon due to a syntax error. I recommend <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">#!/bin/bash</span> as shebang.</li>
      <li>For troubleshooting, it may be helpful to watch the output of <span style="font-family: 'Courier New'; font-weight: normal; font-style: normal; text-decoration: none;">journalctl -f</span> in a shell window when an external storage device is attached. Also a look into the file /var/log/bash_err.log can be helpful.</li>
    </ul> 
     
  </body>
</html>
